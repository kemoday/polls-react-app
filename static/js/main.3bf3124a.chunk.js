(this["webpackJsonppolls-react-app"]=this["webpackJsonppolls-react-app"]||[]).push([[0],{37:function(e,t,a){},40:function(e,t,a){e.exports=a.p+"static/media/statistics-illustration.c149d0ef.png"},42:function(e,t,a){e.exports=a(83)},48:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(38),o=a.n(l),c=a(3),s=a(4),i=Object(n.createContext)(),u=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(null),u=Object(s.a)(c,2),m=u[0],d=u[1];return r.a.createElement(i.Provider,{value:{user:l,setUser:o,token:m,setToken:d}},e.children)},m=a(2),d=a.n(m),p=a(6),b=a(5),f=(a(48),function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"not-found-hero"},r.a.createElement("h1",null,"404")),r.a.createElement("div",{className:"not-found-text"},r.a.createElement("h1",null,"OOPS! PAGE",r.a.createElement("br",null),"NOT FOUND"),r.a.createElement("p",null,"we are sorry the page you requested cannot be found."),r.a.createElement(c.b,{className:"mt-4 block text-center bg-[#15b4a6] hover:bg-[#283e47] text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-500",to:"/"},"GO TO HOME PAGE"))))}),h=(a(54),function(){var e=Object(n.useContext)(i),t=e.user,a=e.setUser,l=e.setToken,o=Object(b.g)();return r.a.createElement("div",{className:"absolute top-0 left-0 w-full bg-[#15b4a6] flex justify-between"},r.a.createElement("div",{className:"grid items-center md:ml-5 lg:ml-5 xl:ml-5"},r.a.createElement(c.b,{to:"/",className:"text-3xl rounded active:text-[#aaa] font-bold mr-8 hover:text-[#283e47] duration-500 text-[#ecebeb]"},r.a.createElement("span",{className:"duration-1000 active:text-[#aaa] hover:text-[#283e47] fas fa-poll text-3xl ml-5 mr-1"}),"Polls")),(null===t||void 0===t?void 0:t._id)?r.a.createElement("div",{className:"hidden  [flex:1] md:block lg:block"},r.a.createElement(c.c,{activeClassName:"bg-[#283e47]",to:"/user/dashboard/",className:"py-2 active:text-[#aaa] px-2 text-[#ecebeb] duration-500 hover:bg-[#283e47]"},r.a.createElement("span",{className:"fas fa-chart-line mr-1 duration-100"}),"Dashboard"),r.a.createElement(c.c,{activeClassName:"bg-[#283e47]",to:"/polls/add",className:"py-2 active:text-[#aaa] px-2 text-[#ecebeb] duration-500 hover:bg-[#283e47]"},r.a.createElement("span",{className:"fas fa-plus mr-1 duration-100"}),"Add Poll"),r.a.createElement("button",{onClick:function(e){a(null),l(null),sessionStorage.removeItem("token"),o.push("/user/account/signin")},className:"py-2 active:text-[#aaa] px-2 text-[#ecebeb] duration-500 hover:bg-[#283e47]"},"Log Out ",r.a.createElement("span",{className:"fas fa-sign-out-alt"}))):r.a.createElement("div",{className:"hidden   [flex:1] md:block lg:block my-2"},r.a.createElement(c.c,{activeClassName:"bg-[#283e47]",className:"ml-2 rounded active:text-[#aaa] py-2 px-2 text-[#ecebeb] duration-500 hover:bg-[#283e47]",to:"/user/account/signup"},"Sign Up ",r.a.createElement("span",{className:"fas fa-user-plus"})),r.a.createElement(c.c,{activeClassName:"bg-[#283e47]",className:"ml-2 active:text-[#aaa] rounded py-2 px-2 text-[#ecebeb] duration-500 hover:bg-[#283e47]",to:"/user/account/signin"},"Log In ",r.a.createElement("span",{className:"fas fa-sign-in-alt"}))),r.a.createElement("div",{className:"sm:mr-1 lg:mr-5 md:mr-5 xlg:mr-5"},r.a.createElement("button",{className:"p-2 active:text-[#aaa] text-[#ecebeb] duration-500 hover:text-[#ccc]"},r.a.createElement("span",{className:"fas fa-bars"}))))}),v=(a(55),function(){return r.a.createElement("div",{className:"thanks-wrapper"},r.a.createElement("li",{className:"fa fa-check"}),r.a.createElement("h1",null,"Thank You For Voting"))}),E=a(1),g=a(9),x=a(16),w=a(15),O=a(8),N=function(e){var t=e.choice,a=e.index;return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",id:"Choice"+a,name:"choice",value:t.text,required:!0}),r.a.createElement("label",{htmlFor:"Choice"+a},t.text))},j=a(17),y=a.n(j),k="https://polls-nodejs-backend.herokuapp.com",S=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=11;break}return e.prev=1,e.next=4,y.a.post("".concat(k,"/polls/add/"),{poll:t,token:a});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,y.a.put("".concat(k,"/polls/vote/").concat(t._id),t.options,{withCredentials:!0});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,y.a.get("".concat(k,"/polls/").concat(t),{withCredentials:!0});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:throw e.prev=8,e.t0=e.catch(1),new ErrorEvent(e.t0);case 11:throw new ErrorEvent("Poll Id Reqired");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a||(a=sessionStorage.getItem("token")),!t||!a){e.next=13;break}return e.prev=2,e.next=5,y.a.post("".concat(k,"/polls/user/").concat(t),{token:a});case 5:return n=e.sent,r=n.data,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(2),new ErrorEvent("Error");case 13:throw new ErrorEvent("Poll Id Reqired");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,y.a.delete("".concat(k,"/polls/").concat(t),{withCredentials:!0});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:throw e.prev=8,e.t0=e.catch(1),new ErrorEvent(e.t0);case 11:throw new ErrorEvent("Poll Id Reqired");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),L=(a(73),a(74),function(e){var t=e.animate,a=void 0!==t&&t;return r.a.createElement(c.b,{to:"/",className:"logo"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:a?"col-ani":"col"}),r.a.createElement("div",{className:a?"col-ani":"col"}),r.a.createElement("div",{className:a?"col-ani":"col"})))}),A=(a(75),function(){return r.a.createElement("div",{className:"loadding-page"},r.a.createElement("div",{className:"loadding-wrapper"},r.a.createElement(L,{animate:!0}),r.a.createElement("p",null,"Loadding ...")))}),F=(a(76),function(e){var t=e.fetchData;return r.a.createElement("div",{className:"page-error"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("i",{className:"material-icons"},"cloud_off"),r.a.createElement("h2",null,"Network Error"),r.a.createElement("p",null,"Network or server error"),r.a.createElement("button",{className:"bg-[#15b4a6] px-4 hover:bg-[#283e47] text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-500",onClick:function(){t?t():window.location.reload()}},"Reload")))}),I=function e(){var t=this;Object(O.a)(this,e),this.add=function(e){t.includes(e)||(t.votesList.push(e),localStorage.setItem("votesList",JSON.stringify(t.votesList)))},this.includes=function(e){return t.votesList.includes(e)},this.votesList=JSON.parse(localStorage.getItem("votesList"))||[]},_=function(e){Object(x.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).handleVoting=function(e){e.preventDefault(),n.setState(Object(E.a)(Object(E.a)({},n.state),{},{loadding:!0}));var t=e.target.choice.value,a=n.state.poll.options.map((function(e){return e.text===t?Object(E.a)(Object(E.a)({},e),{},{votes:e.votes+1}):e}));C(Object(E.a)(Object(E.a)({},n.state.poll),{},{options:a})).then((function(e){n.setState(Object(E.a)(Object(E.a)({},n.state),{},{loadding:!1})),n.votesList.add(n.state.poll._id),n.history.push("/vote/".concat(n.match.params.id,"/thanks"))})).catch((function(){n.setState(Object(E.a)(Object(E.a)({},n.state),{},{loadding:!1,error:!0}))}))},n.match=n.props.match,n.history=n.props.history,n.state={poll:null,error:null,loadding:!1},n.votesList=new I,n}return Object(g.a)(a,[{key:"fetchData",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(this.match.params.id);case 3:t=e.sent,this.setState(Object(E.a)(Object(E.a)({},this.state),{},{poll:t})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Error: Network Error"===e.t0.type?this.setState(Object(E.a)(Object(E.a)({},this.state),{},{error:501})):this.setState(Object(E.a)(Object(E.a)({},this.state),{},{error:404}));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.votesList.includes(this.match.params.id)?this.history.push("/vote/".concat(this.match.params.id,"/thanks")):this.fetchData()}},{key:"render",value:function(){return this.state.error?404===this.state.error?r.a.createElement(f,null):r.a.createElement(F,null):this.state.poll?r.a.createElement("div",{className:"vote-wrapper sm:[max-width:450px] sm:w-full mx-2 "},r.a.createElement("h1",{className:"mb-4 "},this.state.poll.title),r.a.createElement("p",{className:"mb-4 text-justify bg-slate-100 rounded-md"},this.state.poll.question),r.a.createElement("form",{className:"mb-4",onSubmit:this.handleVoting},this.state.poll.options.map((function(e,t){return r.a.createElement(N,{key:t,choice:e,index:t})})),r.a.createElement("button",{id:"vote",type:"submit"},this.state.loadding?"loadding...":" Vote"))):r.a.createElement(A,null)}}]),a}(n.Component),U=(a(77),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{className:"animate-bounce",to:"/user/dashboard"}," ","go to Dashboard"),r.a.createElement("div",{className:"vote-page"},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/vote/:id/thanks",component:v}),r.a.createElement(b.b,{path:"/vote/:id",component:_}),r.a.createElement(b.b,{component:f}))))}),M=a(40),R=a.n(M),T=(a(37),function(){document.title="Polls Home Page";var e=Object(n.useContext)(i).user;return r.a.createElement("div",{className:"p-11 box-border h-screen flex flex-col lg:flex-row items-center justify-center bg-[#b9e0df]"},r.a.createElement("div",{className:"mr-50"},r.a.createElement("h1",{className:"text-5xl font-bold mb-4 text-white"},r.a.createElement("li",{className:"fa fa-poll"})," Polls"),r.a.createElement("div",{className:"bg-white rounded-md p-4 mb-5"},r.a.createElement("h2",{className:"text-2xl font-bold mb-2"},"Collect audience's opinions"),r.a.createElement("p",{className:""},"create and share polls with your audience, let them know how much you care about them, let them choose what is important for them so you know what the next step.")),r.a.createElement("ul",{className:"m-4 ml-0 mt-4 ".concat(e?"hidden":"flex")},r.a.createElement("li",null,r.a.createElement(c.b,{className:"bg-[#15b4a6] duration-500 hover:bg-[#283e47] text-white mr-2 px-4 py-2 rounded cursor-pointer",to:"/user/account/signup"},"Sign Up ",r.a.createElement("span",{className:"fas fa-user-plus"}))),r.a.createElement("li",null,r.a.createElement(c.b,{className:"bg-[#15b4a6] duration-500 hover:bg-[#283e47] text-white mr-2 px-4 py-2 rounded cursor-pointer",to:"/user/account/signin"},"Log In ",r.a.createElement("span",{className:"fas fa-sign-in-alt"}))))),r.a.createElement("div",{className:"sm:grid place-items-center hidden"},r.a.createElement("img",{className:"sm:mt-4 lg:w-2/3 lg:ml-8 animate-pulse",src:R.a,alt:"Polls App"})))}),V=a(18),J=a(13),W=(a(78),function(e){var t=e.option,a=e.handleAddOption,n=e.handleRemoveOption,l=e.handleOptionChange;return r.a.createElement("div",{className:"option-item"},r.a.createElement("input",{autoFocus:!0,required:!0,onChange:function(e){return l(e,t)},value:t.text,type:"text",name:"option",placeholder:"Poll's option",id:"option"}),r.a.createElement("div",{className:"btns-wrapper"},r.a.createElement("button",{onClick:function(e){return a(t.id)},type:"button"},r.a.createElement("li",{className:"fa fa-plus"})),r.a.createElement("button",{onClick:function(e){return n(t.id)},type:"button"},r.a.createElement("li",{className:"fa fa-minus"}))))}),B=(a(79),function(e){var t=e.handleAddOption,a=e.options,n=e.handleRemoveOption,l=e.handleOptionChange;return r.a.createElement("div",{className:"option"},a.map((function(e){return r.a.createElement(W,{handleAddOption:t,handleRemoveOption:n,handleOptionChange:l,key:e.id,option:e})})))}),G=(a(80),function(e){var t=e.loadding;return r.a.createElement("button",{id:"publish",className:"w-full",type:"submit",disabled:t},t?"Loadding...":r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"fa fa-location-arrow"}),"Publish"))}),H=(a(81),function(){var e,t;document.title="Poll - Add new";var a=Object(n.useContext)(i),l=a.user,o=a.setUser,u=a.token,m=Object(n.useState)({title:"",question:"",options:[{id:0,text:""}],count:0,loadding:!1,error:null}),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(b.g)(),v=function(e){f(Object(E.a)(Object(E.a)({},p),{},Object(V.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"add-poll mt-11"},r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("h1",null,r.a.createElement("b",null,"ADD NEW POLL")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f(Object(E.a)(Object(E.a)({},p),{},{loadding:!0,error:null}));var t={userId:l._id,title:p.title,question:p.question,options:p.options.map((function(e){return{text:e.text,votes:0}}))};S(t,u).then((function(e){f(Object(E.a)(Object(E.a)({},p),{},{loadding:!1,error:!1})),o(Object(E.a)(Object(E.a)({},l),{},{polls:l.polls.push(e)})),h.push("/user/dashboard")})).catch((function(e){alert("error while submiting",e),f(Object(E.a)(Object(E.a)({},p),{},{loadding:!1})),f(Object(E.a)(Object(E.a)({},p),{},{error:"Error, try again after a few seconds."}))}))}},r.a.createElement("input",{autoFocus:!0,onChange:v,required:!0,value:p.title,type:"text",name:"title",placeholder:"Poll's title",id:"title"}),r.a.createElement("textarea",{required:!0,onChange:v,value:p.question,placeholder:"your question goes here...",name:"question",id:"question",cols:"30",rows:"5"}),r.a.createElement("h2",null,"Poll's Options (",null===(e=p.options)||void 0===e?void 0:e.length," of 5)",5===(null===(t=p.options)||void 0===t?void 0:t.length)&&r.a.createElement(r.a.Fragment,null,"do you wont more options?"," ",r.a.createElement(c.b,{className:"hover:no-underline underline",to:"/vote/123/thanks"},"upgrade now"))),r.a.createElement(B,{options:p.options,handleOptionChange:function(e,t){t.text=e.target.value,f(Object(E.a)(Object(E.a)({},p),{},{options:p.options.map((function(e){return e.id===t.id?t:e}))}))},handleAddOption:function(e){if(p.options.length<5){var t={id:p.count+1,text:""},a=0;p.options.forEach((function(t,n){t.id===e&&(a=n)}));var n=Object(J.a)(p.options);n.splice(a+1,0,t),f(Object(E.a)(Object(E.a)({},p),{},{options:n,count:p.count+1}))}},handleRemoveOption:function(e){p.options.length>1&&f(Object(E.a)(Object(E.a)({},p),{},{options:p.options.filter((function(t){return t.id!==e}))}))}}),r.a.createElement("div",{style:{color:"red"}},p.error),r.a.createElement(G,{loadding:p.loadding}))))}),Y={backgroundColor:"rgba(238, 238, 238, 0.8)",textAlign:"center",padding:"1rem"},z=function(){return r.a.createElement("div",{style:Y},r.a.createElement(L,{animate:!0}),r.a.createElement("p",{style:{fontWeight:"bold",marginBottom:"0"}},"Loadding Polls"))},K=function(e){var t=e.query,a=e.onSearchChange;return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("input",{value:t,onChange:a,type:"search",placeholder:"Search in titles...",name:"search",id:"search"}),r.a.createElement(c.b,{style:{flex:1},className:"bg-[#15b4a6] text-center hover:bg-[#283e47] text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-500",to:"/polls/add"},"Add Poll"))},Q=function(e){var t=e.sortBy;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"all-polls"},r.a.createElement("p",null,"All Your Polls")),r.a.createElement("div",{className:"polls-header"},r.a.createElement("header",{id:"myHeader"},r.a.createElement("ul",null,r.a.createElement("li",{style:{fontWeight:"600"}},"Poll Name")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return t("views")}},"Views")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return t("votes")}},"Votes")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return t("date")}},"Date")),r.a.createElement("li",null,r.a.createElement("button",{disabled:!0},"Action")),r.a.createElement("li",null,r.a.createElement("button",{disabled:!0},"Expand")," ")))))},X=function(e){var t=e.poll,a=r.a.useContext(i),l=a.user,o=a.setUser,u=Object(n.useState)({showMenu:!1,deleting:!1}),m=Object(s.a)(u,2),d=m[0],p=m[1],b=new Date(t.createdAt),f="".concat(b.getDate(),"/").concat(b.getMonth(),"/").concat(b.getFullYear());return(null===t||void 0===t?void 0:t.options)?r.a.createElement("article",null,r.a.createElement("div",{className:"content"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{className:"font-bold hover:underline",to:"/vote/".concat(t._id)},t.title," "))),r.a.createElement("ul",null,r.a.createElement("li",null,t.views),r.a.createElement("li",null,t.options.reduce((function(e,t){return e+t.votes}),0)),r.a.createElement("li",null,f),r.a.createElement("li",null,d.deleting?"...":r.a.createElement("button",{onClick:function(e){return a=t._id,p(Object(E.a)(Object(E.a)({},d),{},{deleting:!0})),void D(a).then((function(){p(Object(E.a)(Object(E.a)({},d),{},{deleting:!1})),o(Object(E.a)(Object(E.a)({},l),{},{polls:l.polls.filter((function(e){return e._id!==t._id}))}))})).catch((function(){p(Object(E.a)(Object(E.a)({},d),{},{deleting:!1})),alert("Error while deleting poll")}));var a}},r.a.createElement("span",{className:"fa fa-trash"}))),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return p(Object(E.a)(Object(E.a)({},d),{},{showMenu:!d.showMenu}))}},r.a.createElement("span",{className:"fas fa-angle-".concat(d.showMenu?"down":"left")}))))),d.showMenu&&r.a.createElement("section",null,t.options.map((function(e){return r.a.createElement("li",{key:e._id},"[",e.votes," votes] ",e.text)})))):null},Z=function(e){return 0===e.polls.length?r.a.createElement("p",{className:"mt-4"},"No Items"):r.a.createElement("div",{className:"polls-wrapper"},e.polls.map((function(e){return r.a.createElement(X,{key:e._id,poll:e})})))},$=a(41),ee=(a(82),function(e){document.title="Polls - Dashboard";var t=r.a.useContext(i),a=t.user,l=t.setUser,o=t.token,c=Object(n.useState)(""),u=Object(s.a)(c,2),m=u[0],b=u[1],f=Object(n.useState)([]),h=Object(s.a)(f,2),v=h[0],g=h[1],x=Object(n.useState)(!1),w=Object(s.a)(x,2),O=w[0],N=w[1],j=new $.a([],{keys:["title"]});function y(){return(y=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===a||void 0===a?void 0:a._id)||O){e.next=13;break}return N(!1),e.prev=2,e.next=5,q(a._id,o);case 5:t=e.sent,l(Object(E.a)(Object(E.a)({},a),{},{polls:t})),g(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),N(!0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=!0;function t(){return(t=Object(p.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===a||void 0===a?void 0:a._id)||O){t.next=12;break}return N(!1),t.prev=2,t.next=5,q(a._id,o);case 5:n=t.sent,e&&(l(Object(E.a)(Object(E.a)({},a),{},{polls:n})),g(n)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),N(!0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[a,o,l,O]),O?r.a.createElement(F,{fetchData:function(){return y.apply(this,arguments)}}):r.a.createElement("div",{className:"dashboard-page px-5",style:{marginTop:"45px"}},r.a.createElement("h1",null,r.a.createElement("b",null,"Dashboard")),r.a.createElement(K,{query:m,onSearchChange:function(e){if(b(e.target.value),""!==e.target.value){var t=j.search(e.target.value).map((function(e){return e.item}));g(t)}else g(a.polls)}}),r.a.createElement("div",{className:"lg:overflow-x-scroll lg:overflow-auto"},r.a.createElement(Q,{sortBy:function(e){"title"===e?v.sort():"views"===e?v.sort((function(t,a){return a[e]-t[e]})):"date"===e?v.sort((function(t,a){return a[e]-t[e]})).reverse():"votes"===e&&v.sort((function(e,t){return t.options.reduce((function(e,t){return e+t.votes}),0)-e.options.reduce((function(e,t){return e+t.votes}),0)})),g((function(){return Object(J.a)(v)}))}}),null===v?r.a.createElement(z,null):r.a.createElement(Z,{polls:v})))}),te="https://polls-nodejs-backend.herokuapp.com/",ae=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat(te,"user/account/info/"),{token:t});case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("error"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,y.a.post("".concat(te,"user/account/signup"),t);case 4:return a=e.sent,n=a.data,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,sessionStorage.getItem("token")&&sessionStorage.removeItem("token"),e.next=5,y.a.post("".concat(te,"user/account/signin"),t);case 5:return a=e.sent,sessionStorage.setItem("token",a.data.token),e.abrupt("return",a.data);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();function le(){var e=r.a.useContext(i),t=e.setUser,a=e.setToken,l=Object(b.g)(),o=Object(n.useState)("JohnDoe@gmail.com"),u=Object(s.a)(o,2),m=u[0],f=u[1],h=Object(n.useState)("12345678"),v=Object(s.a)(h,2),E=v[0],g=v[1],x=Object(n.useState)(!1),w=Object(s.a)(x,2),O=w[0],N=w[1],j=Object(n.useState)(null),y=Object(s.a)(j,2),k=y[0],S=y[1],C=function(){var e=Object(p.a)(d.a.mark((function e(n){var r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),S(null),N(!0),""!==m&&""!==E){e.next=7;break}return S("All field are required"),N(!1),e.abrupt("return");case 7:return e.prev=7,e.next=10,re({email:m,password:E});case 10:r=e.sent,o=r.user,c=r.token,t(o),a(c),l.replace("/user/dashboard"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),N(!1),e.t0.response?S(e.t0.response.data.message):S("error while submiting");case 22:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"bg-white max-w-lg mx-auto sm:p-8 p-4 md:p-12 my-10 rounded-lg shadow-2xl"},r.a.createElement("section",null,r.a.createElement("h3",{className:"font-bold text-2xl"},"Welcome to Polls"),r.a.createElement("p",{className:"text-gray-600 pt-2"},"Sign in to your account.")),r.a.createElement("div",{className:"my-4 p-4 bg-red-200 rounded-lg font-bold",style:{display:k?"":"none"}},r.a.createElement("p",null,k)),r.a.createElement("section",{className:"mt-10"},r.a.createElement("form",{className:"flex flex-col",onSubmit:C},r.a.createElement("div",{className:"mb-6 pt-3 rounded bg-gray-200"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,value:m,onChange:function(e){f(e.target.value),N(!1)},type:"email",id:"email",className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-[#15b4a6] transition duration-500 px-3 pb-3"})),r.a.createElement("div",{className:"mb-6 pt-3 rounded bg-gray-200"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,value:E,onChange:function(e){g(e.target.value),N(!1)},type:"password",id:"password",className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-[#15b4a6] transition duration-500 px-3 pb-3"})),r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("p",null,"Don't have an account?"," ",r.a.createElement(c.b,{to:"/user/account/signup",className:"font-bold hover:underline"},"Sign up"))),r.a.createElement("button",{className:"bg-[#15b4a6] hover:bg-[#283e47] text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-500 ".concat(O?"animate-pulse":"animate-none"),type:"submit"},O?"Loading...":"Sign In")))))}function oe(){var e=r.a.useContext(i).setUser,t=Object(b.g)(),a=Object(n.useState)(""),l=Object(s.a)(a,2),o=l[0],u=l[1],m=Object(n.useState)(""),f=Object(s.a)(m,2),h=f[0],v=f[1],E=Object(n.useState)(""),g=Object(s.a)(E,2),x=g[0],w=g[1],O=Object(n.useState)(!1),N=Object(s.a)(O,2),j=N[0],y=N[1],k=Object(n.useState)(null),S=Object(s.a)(k,2),C=S[0],P=S[1],q=function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),P(null),y(!0),""!==o&&""!==h&&""!==x){a.next=7;break}return P("All field are required"),y(!1),a.abrupt("return");case 7:return a.prev=7,a.next=10,ne({name:o,email:h,password:x});case 10:r=a.sent,e(r),t.replace("/user/dashboard"),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(7),y(!1),a.t0.response?alert(a.t0.response.data.message):P("error while submiting");case 19:case"end":return a.stop()}}),a,null,[[7,15]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"bg-white max-w-lg mx-auto sm:p-8 p-4 md:p-12 my-10 rounded-lg shadow-2xl"},r.a.createElement("section",{className:"mb-2"},r.a.createElement("h3",{className:"font-bold text-2xl"},"Welcome to Polls"),r.a.createElement("p",{className:"text-gray-600 pt-2"},"Sign up for a new account.")),r.a.createElement("div",{className:"my-4 p-4 bg-red-200 rounded-lg font-bold",style:{display:C?"":"none"}},r.a.createElement("p",null,C)),r.a.createElement("section",{className:""},r.a.createElement("form",{className:"flex flex-col",onSubmit:q},r.a.createElement("div",{className:"mb-6 pt-3 rounded bg-gray-200"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"name"},"Name"),r.a.createElement("input",{required:!0,value:o,onChange:function(e){u(e.target.value),y(!1)},type:"text",id:"name",className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-[#15b4a6] transition duration-500 px-3 pb-3"})),r.a.createElement("div",{className:"mb-6 pt-3 rounded bg-gray-200"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"email"},"Email"),r.a.createElement("input",{required:!0,value:h,onChange:function(e){v(e.target.value),y(!1)},type:"text",id:"email",className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-[#15b4a6] transition duration-500 px-3 pb-3"})),r.a.createElement("div",{className:"mb-6 pt-3 rounded bg-gray-200"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,value:x,onChange:function(e){w(e.target.value),y(!1)},type:"password",id:"password",className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-[#15b4a6] transition duration-500 px-3 pb-3"})),r.a.createElement("div",{className:"flex mb-2"},r.a.createElement("p",{className:""},"already have an account?"," ",r.a.createElement(c.b,{to:"/user/account/signin",className:"font-bold hover:underline"},"Sign in"))),r.a.createElement("button",{className:"bg-[#15b4a6] hover:bg-[#283e47] text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-500 ".concat(j?"animate-pulse":"animate-none"),type:"submit"},j?"Loading...":"Sign Up")," "))))}function ce(){return r.a.createElement("div",{className:" pt-8"},r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/user/account/signup",component:oe}),r.a.createElement(b.b,{path:"/user/account/*",component:le})))}var se=a(23),ie=function(e){var t=e.component,a=Object(se.a)(e,["component"]),l=Object(n.useContext)(i).user;return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return null!==l?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/user/account/signin"})}}))},ue=function(e){var t=e.component,a=Object(se.a)(e,["component"]),l=Object(n.useContext)(i).user;return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return null===l?r.a.createElement(t,e):r.a.createElement(b.a,{to:"/user/dashboard"})}}))},me=function(){var e=r.a.useContext(i),t=e.setUser,a=e.token,l=e.setToken;return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(a);case 3:"you are not sigen in."!==(n=e.sent)&&t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}l(sessionStorage.getItem("token")),function(){e.apply(this,arguments)}()}),[t,l,a]),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/vote/",component:U}),r.a.createElement(b.b,{path:"/"},r.a.createElement(h,null),r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",component:T}),r.a.createElement(b.b,{exact:!0,path:"/polls-react-app",component:T}),r.a.createElement(ie,{exact:!0,path:"/user/dashboard/",component:ee}),r.a.createElement(ie,{exact:!0,path:"/polls/add",component:H}),r.a.createElement(ue,{exact:!0,path:"/user/account/*",component:ce}),r.a.createElement(b.b,{component:f}))),r.a.createElement(b.b,{component:f}))};o.a.render(r.a.createElement(c.a,null,r.a.createElement(u,null,r.a.createElement(me,null))),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3bf3124a.chunk.js.map